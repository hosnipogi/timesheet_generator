(this.webpackJsonptimesheet_generator=this.webpackJsonptimesheet_generator||[]).push([[0],{11:function(t,e,n){t.exports={myButton:"controls_myButton__2eO2m",badge:"controls_badge__M59Ob",loggedin:"controls_loggedin__3xsFp",loggedout:"controls_loggedout__174EF",links:"controls_links__3Zxns"}},17:function(t,e,n){t.exports={main:"table_main__1t7Fl",unstyledTable:"table_unstyledTable__1RFdC",remarks:"table_remarks__aelYH"}},34:function(t,e,n){t.exports={badge:"header_badge__2tEKr"}},35:function(t,e,n){t.exports={archive:"archive_archive__3Bhjg"}},54:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var a,r=n(0),o=n(1),c=n.n(o),l=n(32),i=n.n(l),s=n(9),u=n(3),d=function(){return Object(r.jsx)("nav",{children:Object(r.jsx)(s.b,{to:"/",children:"Home"})})},h=n(5),j=function(){return(new Date).toLocaleString()},g=function(){var t=c.a.useState(j()),e=Object(h.a)(t,2),n=e[0],a=e[1];return c.a.useEffect((function(){var t=setInterval((function(){return a(j())}),1e3);return function(){return clearInterval(t)}}),[]),Object(r.jsx)("div",{children:n})},b=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()},f=n(34),O=n.n(f),m=function(){return Object(r.jsxs)("header",{children:[Object(r.jsxs)("p",{children:["User id: ",Object(r.jsx)("span",{className:O.a.badge,children:b()})]}),Object(r.jsx)("hr",{}),Object(r.jsx)(g,{}),Object(r.jsx)(d,{})]})},x=n(13),y=function(t){var e=c.a.useMemo((function(){return localStorage.getItem(t)}),[t]),n=c.a.useState(e||""),a=Object(h.a)(n,2),r=a[0],o=a[1];return c.a.useEffect((function(){e&&e===r||localStorage.setItem(t,r)}),[e,t,r]),[r,o]};!function(t){t.LOGS="logs",t.USER="user"}(a||(a={}));var p,v=new Date,S={date:{date:v.getDate(),month:v.getMonth(),year:v.getFullYear()},login:[],logout:[],remarks:""},E={logs:[S],setLogs:function(){return null}},_=c.a.createContext(E),M=function(t){var e=t.children,n=y(a.LOGS),o=Object(h.a)(n,2),l=o[0],i=o[1],s=c.a.useState(l?JSON.parse(l):[S]),u=Object(h.a)(s,2),d=u[0],j=u[1];return c.a.useEffect((function(){(d[0].login.length||d[0].logout.length)&&i(JSON.stringify(d))}),[d,i]),Object(r.jsx)(_.Provider,{value:{logs:d,setLogs:j},children:e})},T=function(t,e,n){return console.log({mon:n}),t.filter((function(t){return t.date.year===e})).filter((function(t){return t.date.month===n})).sort((function(t,e){return t.date.date-e.date.date}))};!function(t){t[t.January=0]="January",t[t.February=1]="February",t[t.March=2]="March",t[t.April=3]="April",t[t.May=4]="May",t[t.June=5]="June",t[t.July=6]="July",t[t.August=7]="August",t[t.September=8]="September",t[t.October=9]="October",t[t.November=10]="November",t[t.December=11]="December"}(p||(p={}));var w=p,k=n(11),I=n.n(k),A=function(t){var e=t.func,n=t.text;return Object(r.jsx)("button",{className:I.a.myButton,onClick:e,children:n})};function L(t,e){return new Date(t,e+1,0).getDate()}var N=function(){return new Date},D=function(){var t=N();return{date:t.getDate(),month:t.getMonth(),year:t.getFullYear()}};function C(t,e){var n=D();return e.year?"/dtr/".concat(e.year,"/").concat(e.month,"/").concat(t):"/dtr/".concat(n.year,"/").concat(w[n.month],"/").concat(t)}var R=function(t){var e,n,a=t.currentTable,o=c.a.useContext(_),l=o.logs,i=o.setLogs,d=c.a.useState(function(t){if(!t[0].login.length)return!1;var e=t.length-1,n=t[e].logout.length,a=t[e].login.length;return!t[e].logout[n-1]||n!==a}(l)),j=Object(h.a)(d,2),g=j[0],b=j[1],f=Object(u.f)();return Object(r.jsxs)("section",{style:{textAlign:"center"},children:[Object(r.jsxs)("p",{children:["You are"," ",Object(r.jsx)("span",{className:"".concat(I.a.badge," ").concat(g?I.a.loggedin:I.a.loggedout),children:g?"Logged In":"Logged Out"})]}),Object(r.jsx)(A,{text:g?"Logout":"Login",func:function(){var t=function(){var t=N(),e=t.getHours(),n=t.getMinutes(),a=e>=12?"PM":"AM";return(e=(e%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a}(),e=l[l.length-1],n=D();if(n.year===e.date.year&&n.month===e.date.month&&n.date===e.date.date){var a={date:n,login:g?e.login:[].concat(Object(x.a)(e.login),[t]),logout:g?e.logout[0]?[].concat(Object(x.a)(e.logout),[t]):[t]:e.logout,remarks:e.remarks},r=Object(x.a)(l);r[r.length-1]=a,i(r)}else i([].concat(Object(x.a)(l),[{date:n,login:[g?"":t],logout:[g?t:""],remarks:""}]));b(!g)}}),0!==l[l.length-1].login.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(A,{text:"Clear Logs",func:function(){var t=prompt('Type "ok" to clear logs',"no");"ok"===(null===t||void 0===t?void 0:t.toLowerCase())&&(localStorage.clear(),i([S]),b(!1))}}),Object(r.jsx)(A,{text:"Sync to server",func:function(){alert(JSON.stringify(l))}}),(null===(e=a[0])||void 0===e?void 0:e.date.date)<16&&Object(r.jsx)(s.b,{className:I.a.links,to:C(1,f),children:"Generate 1-15 cutoff"}),(null===(n=a[a.length-1])||void 0===n?void 0:n.date.date)>=16&&Object(r.jsxs)(s.b,{className:I.a.links,to:C(2,f),children:["Generate 16-",L(+f.year||D().year,w[f.month]||D().month),"\xa0cutoff"]})]})]})},F=n(17),P=n.n(F),W=function(t){var e,n,a=t.match,o=c.a.useContext(_),l=o.logs,i=o.setLogs,s=c.a.useState([]),u=Object(h.a)(s,2),d=u[0],j=u[1],g=c.a.useState(""),f=Object(h.a)(g,2),O=f[0],m=f[1];c.a.useEffect((function(){var t=new Date,e=a.params,n=e.year,r=e.month,o=T(l,n?+n:t.getFullYear(),r?w[r]:t.getMonth());return j(o),function(){return console.log("table unmounted")}}),[l,a.params]),c.a.useEffect((function(){return m(d.map((function(t){return t.remarks})))}),[d]);return Object(r.jsxs)("section",{className:P.a.main,children:[0!==(null===(e=d[0])||void 0===e?void 0:e.login.length)?Object(r.jsxs)("table",{className:P.a.unstyledTable,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Date"}),Object(r.jsx)("th",{children:"Login"}),Object(r.jsx)("th",{children:"Logout"}),Object(r.jsx)("th",{children:"Remarks"})]})}),Object(r.jsx)("tbody",{children:0!==(null===(n=d[0])||void 0===n?void 0:n.login.length)&&d.map((function(t,e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"".concat(w[t.date.month]," ").concat(t.date.date,", ").concat(t.date.year)}),Object(r.jsx)("td",{style:{color:"red"},valign:"top",children:t.login.map((function(t){return Object(r.jsx)("span",{style:{display:"block"},children:t},b())}))}),Object(r.jsx)("td",{style:{color:"green"},valign:"top",children:t.logout.map((function(t){return Object(r.jsx)("span",{style:{display:"block"},children:t},b())}))}),Object(r.jsx)("td",{children:Object(r.jsx)("input",{type:"text",className:P.a.remarks,onChange:function(t){return function(t,e){if(Array.isArray(O)){var n=Object(x.a)(O);n[e]=t.target.value,m(n)}}(t,e)},onBlur:function(){return function(t,e,n,a){var r=l.map((function(r){return O&&r.date.date===n&&r.date.month===e&&r.date.year===t&&(r.remarks=O[a]),r}));i(r)}(t.date.year,t.date.month,t.date.date,e)},value:O?O[e]:O})})]},"".concat(t.date.year,"-").concat(t.date.month,"-").concat(t.date.date,"-").concat(e))}))})]}):Object(r.jsx)("p",{children:"No record yet"}),Object(r.jsx)(R,{currentTable:d})]})},Y=n(35),H=n.n(Y),J=function(t,e,n){return t.map((function(t){return t.date[e]})).filter((function(t,e,n){return n.indexOf(t)===e})).map((function(t,e){return n(t,e)}))},U=function(){var t=c.a.useContext(_).logs,e=J(t,"year",(function(e,n){return t.filter((function(t){return t.date.year===e}))}));return Object(r.jsx)(r.Fragment,{children:0!==t[0].login.length&&Object(r.jsxs)("div",{className:H.a.archive,children:[Object(r.jsx)("h3",{children:"Archive"}),Object(r.jsx)("ul",{children:e.map((function(t){return Object(r.jsxs)("li",{children:[t[0].date.year,Object(r.jsx)("ul",{children:J(t,"month",(function(e,n){return Object(r.jsx)("li",{children:Object(r.jsx)(s.b,{to:"/".concat(t[0].date.year,"/").concat(w[e]),children:w[e]})},b())}))})]},b())}))})]})})},z=n(2),B=n(22),G=n(36),V=n.n(G),K=function(t){var e=t.logs,n=t.title,a=c.a.useRef(document.createElement("iframe"));return console.log({logs:e}),c.a.useEffect((function(){var t={valign:"center",halign:"center",fontSize:6,lineWidth:.1,lineColor:0,cellPadding:0,minCellHeight:6,cellWidth:"wrap"},r=Object(z.a)(Object(z.a)({},t),{},{cellWidth:13}),o=[[{content:"DAY",rowSpan:2,styles:t},{content:"TIME IN",rowSpan:2,styles:Object(z.a)(Object(z.a)({},t),{},{cellWidth:18})},{content:"BREAK OUT",rowSpan:2,styles:Object(z.a)(Object(z.a)({},t),{},{cellWidth:18})},{content:"BREAK IN",rowSpan:2,styles:t},{content:"TIME OUT",rowSpan:2,styles:Object(z.a)(Object(z.a)({},t),{},{cellWidth:18})},{content:"OVERTIME",colSpan:2,styles:t},{content:"REMARKS",rowSpan:2,styles:Object(z.a)(Object(z.a)({},t),{},{cellWidth:40})},{content:" ",rowSpan:2,styles:Object(z.a)(Object(z.a)({},t),{},{cellWidth:4,lineColor:[255,255,255]})},{content:"TOTAL OVERTIME",rowSpan:2,styles:r},{content:"Absences",rowSpan:2,styles:r},{content:"Late/ Undertime",rowSpan:2,styles:r}],[{content:"TIME IN",styles:t},{content:"TIME OUT",styles:t}]],c=e.map((function(e){var n=e.login.map((function(t,e){return console.log({i:t,index:e}),t})),a=e.logout.map((function(t){return t})),o=function(e){return Object(z.a)(Object(z.a)({},t),{},{fontSize:e.length?4+4/e.length:7,valign:e.length>1?"top":"center",halign:e.length>2?"left":"center",cellPadding:{left:e.length>2&&1,top:e.length>1&&1}})};return[{content:e.date.date,styles:Object(z.a)(Object(z.a)({},t),{},{cellWidth:10})},{content:n.join(" / "),styles:o(n)},{content:"",styles:t},{content:"",styles:t},{content:a.join(" / "),styles:o(a)},{content:"",styles:t},{content:"",styles:t},{content:e.remarks?e.remarks:"",styles:Object(z.a)(Object(z.a)({},t),{},{lineColor:0})},{content:"",styles:Object(z.a)(Object(z.a)({},t),{},{lineColor:[255,255,255]})},{content:"",styles:r},{content:"",styles:r},{content:"",styles:r}]}));c.push([{content:"TOTAL",styles:Object(z.a)(Object(z.a)({},t),{},{halign:"right",cellPadding:{right:10},lineWidth:0,lineColor:[255,255,255]})},{content:"",styles:t},{content:"",styles:r},{content:"",styles:r},{content:"",styles:r}]);var l=new B.default({format:"a4",orientation:"p"}),i=l.internal.pageSize,s=i.width?i.width:i.getWidth();l.text("TIMESHEET",10,38,{},{}),l.setFontSize(7),l.text("EMP. NO",10,50),l.text("EMPLOYEE NAME",10,54),l.text("DEPARTMENT",10,58),l.text("PAY PERIOD",10,62),l.text("TIME SCHEDULE",10,66),l.text(":",39,50),l.text(":",39,54),l.text(":",39,58),l.text("".concat(n),42,61),l.text(":",39,62),l.text(":",39,66),l.line(40,50,80,50),l.line(40,54,80,54),l.line(40,58,80,58),l.line(40,62,80,62),l.line(40,66,80,66),V()(l,{startY:70,head:o,body:c,margin:8,theme:"plain"});var u=l.lastAutoTable.finalY;l.setFontSize(8);var d=l.splitTextToSize("              I hereby certify that the above is a true and correct report of the hours of work perfomed, records of which was made daily at the time of arrival at and departure from Office.",s-22);l.text(d,10,u+10),l.line(10,u+26,56,u+26),l.line(s-90,u+26,s-10,u+26),l.text("EMPLOYEE'S SIGNATURE",18,u+30),l.text("AUTHORIZED SUPERVISOR/HEAD OF OFFICE",s-80,u+30),l.text("Instruction for LSERV managed employees:",10,u+48);l.text(["1. Please complete the missing time entries or indicate in the Remarks column if you are on official business, on travel, attended a seminar/training, etc.","2. Make sure all the manual entries are properly signed/initialed by your Department Head or his authorized representative.","3. Submit this Timesheet together with the required supporting documents to LSERV Project Coordinator duly signed/approved by your\n Department Head or his authorized representative."],10,u+52,{maxWidth:s-8}),a.current.src=l.output("datauristring")}),[e,n]),Object(r.jsx)("iframe",{width:"100%",height:"100%",style:{minHeight:"80vh"},title:n,ref:a})},Z=function(t){var e=t.template,n=c.a.useContext(_).logs,a=new Date,o=Object(u.f)(),l=o.year||a.getFullYear(),i=w[o.month]||a.getMonth(),s=o.cutoff||1,d=function(t){var e=t.array,n=t.cutoff,a=t.date,r={date:{date:0}},o=[];function c(t,e){for(var n=t;n<=e;n++)r.date.date=n,o.push(r),r={date:{date:0}}}return 1===n?c(1,15):2===n&&c(16,L(a.year,a.month)),o=o.map((function(t,a){var r=e.filter((function(e){return e.date.date===t.date.date}));return Object(h.a)(r,1)[0]||{date:{date:2===n?a+16:a+1},login:[],logout:[],remarks:""}}))}({array:T(n,+l,i),cutoff:+s,date:{year:+l,month:i}});switch(e){case"lserv":return Object(r.jsx)(K,{logs:d,title:"".concat(w[i]," ").concat(2===s?"16-".concat(L(+l,i)):"1 - 15",", ").concat(l)});default:return Object(r.jsx)("div",{children:"Select a template"})}};n(54);var q=function(){return Object(r.jsx)(s.a,{basename:"/timesheet_generator",children:Object(r.jsxs)(M,{children:[Object(r.jsx)(m,{}),Object(r.jsx)(Q,{children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/",component:W,exact:!0}),Object(r.jsx)(u.a,{path:"/dtr/:year/:month/:cutoff",component:function(){return Object(r.jsx)(Z,{template:"lserv"})}}),Object(r.jsx)(u.a,{path:"/:year/:month",component:W,exact:!0})]})}),Object(r.jsx)("hr",{}),Object(r.jsx)(U,{})]})})},Q=function(t){var e=t.children;return Object(r.jsx)("main",{children:e})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(q,{})}),document.getElementById("root"))}},[[55,1,3]]]);
//# sourceMappingURL=main.22350cec.chunk.js.map